(this["webpackJsonppersonal-area"]=this["webpackJsonppersonal-area"]||[]).push([[0],{107:function(t,e,n){t.exports={contacts:"Contacts_contacts__ZDtBB"}},112:function(t,e,n){t.exports=n(237)},117:function(t,e,n){},118:function(t,e,n){},237:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),o=n(45),l=n.n(o),r=(n(117),n(101)),i=n(102),u=n(111),m=n(109),s=(n(118),n(239)),d=n(238),h=n(12),E=n(14),b=n(104).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"6dc64a36-ec10-411f-b11d-c98c17f272e5"}}),v=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return b.post("auth/login",{email:t,password:e,rememberMe:n})},p=function(){return b.delete("auth/login")},f={isAuth:!1},g=function(t){return{type:"LOGIN",isAuth:t}},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN":return Object(E.a)(Object(E.a)({},t),{},{isAuth:e.isAuth});default:return t}},A=n(21),O=Object(d.a)({form:"login"})((function(t){return c.a.createElement("form",{onSubmit:t.handleSubmit},c.a.createElement("div",null,c.a.createElement(s.a,{placeholder:"Email",name:"email",component:"input"})),c.a.createElement("div",null,c.a.createElement(s.a,{placeholder:"password",name:"password",component:"input"})),c.a.createElement("div",null,c.a.createElement("button",null,"Login")))})),j=Object(h.b)((function(t){return{isAuth:t.auth.isAuth}}),{login:function(t,e){return function(n){v(t,e).then((function(t){console.log(t.data),0===t.data.resultCode&&n(g(!0))}))}}})((function(t){return t.isAuth?c.a.createElement(A.a,{to:"/contacts"}):c.a.createElement("div",null,c.a.createElement("h1",null,"Login"),c.a.createElement(O,{onSubmit:function(e){t.login(e.email,e.password)}}))})),_=n(110),T={contacts:[{id:1,name:"Cartman",email:"cartman@gmail.com",phone:"01"},{id:2,name:"Stan",email:"stan@gmail.com",phone:"02"},{id:3,name:"Kyle",email:"kyle@gmail.com",phone:"03"},{id:4,name:"Kenny",email:"kenny@gmail.com",phone:"04"},{id:5,name:"Batters",email:"batters@gmail.com",phone:"05"}],buttonActive:!1},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD-CONTACT":var n={id:t.contacts.length?t.contacts[t.contacts.length-1].id+1:1,name:"",email:"",phone:""};return t.buttonActive=!0,Object(E.a)(Object(E.a)({},t),{},{contacts:[].concat(Object(_.a)(t.contacts),[n])});case"EDIT-CONTACT":return t.buttonActive=!1,Object(E.a)(Object(E.a)({},t),{},{contacts:t.contacts.map((function(t){return t.id===e.contactId&&(t.name=e.contactData.name,t.email=e.contactData.email,t.phone=e.contactData.phone),t}))});case"DELETE-CONTACT":return t.buttonActive=!1,Object(E.a)(Object(E.a)({},t),{},{contacts:t.contacts.filter((function(t){return t.id!==e.contactId}))});case"CHANGE_BUTTONS_STATE":return Object(E.a)(Object(E.a)({},t),{},{buttonActive:e.active});default:return t}},S=n(36),N=Object(d.a)({form:"contact"})((function(t){return c.a.createElement("form",{onSubmit:t.handleSubmit},c.a.createElement("div",null,c.a.createElement("button",null,"save")),c.a.createElement("div",null,c.a.createElement(s.a,{required:!0,placeholder:"name",name:"name",component:"input"})),c.a.createElement("div",null,c.a.createElement(s.a,{placeholder:"email",name:"email",component:"input"})),c.a.createElement("div",null,c.a.createElement(s.a,{placeholder:"phone",name:"phone",component:"input"})))})),y=function(t){var e=Object(a.useState)(!1),n=Object(S.a)(e,2),o=n[0],l=n[1];return c.a.createElement("div",null,o||!t.contact.name?c.a.createElement("div",null,c.a.createElement(N,{initialValues:t.contact,onSubmit:function(e){t.editContact(e,t.contact.id),l(!1)},contactId:t.contact.id})):c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){l(!0),t.changeButtonsState(!0)},disabled:t.buttonActive},"Edit"),c.a.createElement("button",{onClick:function(){t.deleteContact(t.contact.id),t.deleteSearchContact(t.contact.id)},disabled:t.buttonActive},"Delete")),c.a.createElement("div",null,c.a.createElement("div",null,"name: ",t.contact.name),c.a.createElement("div",null,"email: ",t.contact.email),c.a.createElement("div",null,"phone: ",t.contact.phone))))},k=n(107),B=n.n(k),D=function(t){var e=Object(a.useState)(!1),n=Object(S.a)(e,2),o=n[0],l=n[1],r=Object(a.useState)(t.contacts),i=Object(S.a)(r,2),u=i[0],m=i[1];u.length===t.contacts.length||o||m(t.contacts);var s=function(t){o&&m(u.filter((function(e){return e.id!==t})))};return t.isAuth?c.a.createElement("div",null,c.a.createElement("h3",null,"Contacts:"),c.a.createElement("div",null,c.a.createElement("input",{disabled:t.buttonActive,onChange:function(e){return function(e){var n=e.target.value;n?(m(t.contacts.filter((function(t){return t.name.toLowerCase().includes(n.toLowerCase())}))),l(!0)):(m(t.contacts),l(!1))}(e)},type:"text"}),"search"),c.a.createElement("button",{onClick:t.addContact,disabled:t.buttonActive||o},"Add contact"),c.a.createElement("div",{className:B.a.contacts},!u.length&&o?c.a.createElement("div",null,"Contacts not found"):u.map((function(e){return c.a.createElement(y,{contact:e,key:e.id,deleteContact:t.deleteContact,editContact:t.editContact,buttonActive:t.buttonActive,changeButtonsState:t.changeButtonsState,deleteSearchContact:s})})))):c.a.createElement(A.a,{to:"/login"})},I=Object(h.b)((function(t){return{contacts:t.contactsPage.contacts,buttonActive:t.contactsPage.buttonActive,isAuth:t.auth.isAuth}}),{addContact:function(){return{type:"ADD-CONTACT"}},editContact:function(t,e){return{type:"EDIT-CONTACT",contactData:t,contactId:e}},deleteContact:function(t){return{type:"DELETE-CONTACT",contactId:t}},changeButtonsState:function(t){return{type:"CHANGE_BUTTONS_STATE",active:t}}})((function(t){return c.a.createElement("div",null,c.a.createElement(D,{contacts:t.contacts,addContact:t.addContact,deleteContact:t.deleteContact,editContact:t.editContact,buttonActive:t.buttonActive,changeButtonsState:t.changeButtonsState,isAuth:t.isAuth}))})),L=n(49),P=n.n(L),G=function(t){return c.a.createElement("div",{className:P.a.header},c.a.createElement("div",{className:P.a.logo},"Personal Area"),c.a.createElement("div",{className:P.a.loginBlock},t.isAuth?c.a.createElement("button",{onClick:t.logout},"logout"):null))},H=Object(h.b)((function(t){return{isAuth:t.auth.isAuth}}),{logout:function(){return function(t){p().then((function(e){console.log(e.data),0===e.data.resultCode&&t(g(!1))}))}}})((function(t){return c.a.createElement("div",null,c.a.createElement(G,{isAuth:t.isAuth,logout:t.logout}))})),x=function(t){Object(u.a)(n,t);var e=Object(m.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{className:"app-wrapper"},c.a.createElement(H,null),c.a.createElement("div",{className:"app-wrapper-content"},c.a.createElement(A.d,null,c.a.createElement(A.b,{path:"/contacts",render:function(){return c.a.createElement(I,null)}}),c.a.createElement(A.b,{path:"/login",render:function(){return c.a.createElement(j,null)}}),c.a.createElement(A.a,{from:"/",to:"/contacts"}))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(31),K=n(6),J=n(240),M=n(108),R=Object(K.c)({contactsPage:w,auth:C,form:J.a}),V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||K.d,W=Object(K.e)(R,V(Object(K.a)(M.a)));window.__store__=W;var X=W;l.a.render(c.a.createElement(U.a,null,c.a.createElement(h.a,{store:X},c.a.createElement(x,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},49:function(t,e,n){t.exports={header:"Header_header__9Gvmm",logo:"Header_logo__3OnwY",loginBlock:"Header_loginBlock__2f-0t"}}},[[112,1,2]]]);
//# sourceMappingURL=main.8668be42.chunk.js.map